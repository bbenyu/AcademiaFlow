<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Combiner for Researchers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }
        h1 {
            color: #333;
        }
        p {
            color: #555;
            margin-bottom: 20px;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .snippet {
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        textarea {
            width: 100%;
            height: 100px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 16px;
        }
        input {
            width: 100%;
            margin: 5px 0;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 16px;
        }
        button {
            padding: 12px 24px;
            margin: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        #output-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        #output-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            width: 80%;
            max-width: 600px;
            text-align: left;
            position: relative;
        }
        #output-text {
            white-space: pre-wrap;
            margin-bottom: 20px;
            font-size: 16px;
        }
        #copy-message {
            display: none;
            color: green;
            margin-top: 10px;
            animation: fadeInOut 2s;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { opacity: 0; }
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <h1>Text Combiner for Researchers</h1>
    <p>
        This tool helps you combine multiple text snippets and manage citations efficiently. Input your snippets and references, choose a citation style, and generate a combined text with a formatted bibliography. Save time and ensure accuracy in your academic writing.
    </p>
    <div id="snippets-container" class="grid-container">
        <div class="snippet">
            <h3>Text Snippet 1</h3>
            <textarea id="snippet1" placeholder="Paste your first text snippet here"></textarea>
            <input type="text" id="ref1" placeholder="Reference (e.g., Smith, 2020, Journal of Research)">
        </div>
    </div>
    <button onclick="addSnippet()">Add Snippet</button>
    <label for="citationStyle">Citation Style:</label>
    <select id="citationStyle">
        <option value="apa">APA</option>
        <option value="mla">MLA</option>
        <option value="chicago">Chicago</option>
        <option value="harvard">Harvard</option>
        <option value="ieee">IEEE</option>
        <option value="ama">AMA</option>
        <option value="vancouver">Vancouver</option>
        <option value="turabian">Turabian</option>
        <option value="oscola">OSCOLA</option>
        <option value="bluebook">Bluebook</option>
    </select>
    <button onclick="combineText()">Combine & Generate Bibliography</button>
    <button onclick="clearAll()">Clear All</button>
    <div id="output-modal">
        <div id="output-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div id="output-text"></div>
            <button onclick="copyText()">Copy</button>
            <span id="copy-message">Copied!</span>
        </div>
    </div>
    <script>
        let snippetCount = 1;

        function addSnippet() {
            snippetCount++;
            const container = document.getElementById('snippets-container');
            const newSnippet = document.createElement('div');
            newSnippet.className = 'snippet';
            newSnippet.innerHTML = `
                <h3>Text Snippet ${snippetCount}</h3>
                <textarea id="snippet${snippetCount}" placeholder="Paste your text snippet here"></textarea>
                <input type="text" id="ref${snippetCount}" placeholder="Reference (e.g., Smith, 2020, Journal of Research)">
            `;
            container.appendChild(newSnippet);
        }

        function combineText() {
            const snippets = [];
            const references = [];
            for (let i = 1; i <= snippetCount; i++) {
                const snippet = document.getElementById(`snippet${i}`).value;
                const ref = document.getElementById(`ref${i}`).value;
                if (snippet && ref) {
                    snippets.push(snippet);
                    references.push(ref);
                }
            }
            const style = document.getElementById('citationStyle').value;
            let combined = snippets.map((s, i) => `${s} (${references[i].split(",")[0]}, ${references[i].split(",")[1]})`).join("\n\n");
            const bibliography = generateBibliography(references, style);
            const outputText = combined + "\n\nBibliography:\n" + bibliography;
            document.getElementById('output-text').innerText = outputText;
            document.getElementById('output-modal').style.display = 'flex';
        }

        function generateBibliography(references, style) {
            let bib = "";
            references.forEach(ref => {
                const parts = ref.split(",").map(p => p.trim());
                if (parts.length < 2) return;
                switch (style) {
                    case "apa":
                        bib += `${parts[0]}. (${parts[1]}). ${parts[2] || "Untitled"}.\n`;
                        break;
                    case "mla":
                        bib += `${parts[0].split(" ").pop()}, ${parts[0].split(" ")[0]}. "${parts[2] || "Untitled"}." ${parts[1]}.\n`;
                        break;
                    default:
                        bib += `${parts[0]}, ${parts[1]}, ${parts[2] || "Untitled"}\n`;
                }
            });
            return bib;
        }

        function closeModal() {
            document.getElementById('output-modal').style.display = 'none';
        }

        function copyText() {
            const text = document.getElementById('output-text').innerText;
            navigator.clipboard.writeText(text).then(() => {
                const message = document.getElementById('copy-message');
                message.style.display = 'inline';
                setTimeout(() => message.style.display = 'none', 2000);
            });
        }

        function clearAll() {
            const container = document.getElementById('snippets-container');
            container.innerHTML = `
                <div class="snippet">
                    <h3>Text Snippet 1</h3>
                    <textarea id="snippet1" placeholder="Paste your first text snippet here"></textarea>
                    <input type="text" id="ref1" placeholder="Reference (e.g., Smith, 2020, Journal of Research)">
                </div>
            `;
            snippetCount = 1;
        }

        document.getElementById('output-text').addEventListener('click', function() {
            const range = document.createRange();
            range.selectNodeContents(this);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
        });
    </script>
</body>
</html>
